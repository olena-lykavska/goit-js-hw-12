{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios'; // Імпортуємо бібліотеку axios для зручної роботи з HTTP-запитами\n\n// Основні параметри Pixabay API\nconst BASE_URL = 'https://pixabay.com/api/'; // Базова URL-адреса API\nconst API_KEY = '47732907-b8d033787a8c1460109d1a6df'; // Ключ доступу до Pixabay API\n\n// Функція для отримання зображень\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  // Параметри запиту до API\n  const params = {\n    key: API_KEY, // Ключ API\n    q: query, // Ключове слово для пошуку\n    image_type: 'photo', // Тип зображення (фото)\n    orientation: 'horizontal', // Орієнтація зображення (горизонтальна)\n    safesearch: true, // Увімкнення безпечного пошуку\n    page, // Номер сторінки результатів\n    per_page: perPage, // Кількість зображень на сторінку\n  };\n\n  try {\n    // Виконуємо запит і повертаємо отримані дані\n    const response = await axios.get(BASE_URL, { params });\n    return response.data; // Повертаємо об'єкт із результатами\n  } catch (error) {\n    // Обробляємо помилки запиту\n    console.error('Помилка запиту до Pixabay API:', error);\n    throw error; // Повторно кидаємо помилку, щоб обробити її в основному коді\n  }\n}\n","import SimpleLightbox from 'simplelightbox'; // Імпортуємо бібліотеку SimpleLightbox для модального перегляду зображень\nimport 'simplelightbox/dist/simple-lightbox.min.css'; // Імпортуємо стилі для SimpleLightbox\n\nlet lightbox; // Глобальна змінна для збереження екземпляра SimpleLightbox\n\n// Функція створення розмітки для галереї\nexport function createGalleryMarkup(images) {\n  // Перетворюємо масив зображень у HTML-розмітку\n  return images\n    .map(\n      ({ webformatURL, largeImageURL, tags }) => `\n    <a class=\"gallery__item\" href=\"${largeImageURL}\">\n      <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n    </a>\n  `\n    )\n    .join(''); // Об'єднуємо всі елементи в єдиний рядок\n}\n\n// Функція для додавання розмітки до контейнера галереї\nexport function renderGallery(container, markup) {\n  container.insertAdjacentHTML('beforeend', markup); // Додаємо нові елементи до DOM\n  if (!lightbox) {\n    // Ініціалізуємо SimpleLightbox, якщо він ще не існує\n    lightbox = new SimpleLightbox('.gallery__item', { captionsData: 'alt', captionDelay: 250 });\n  } else {\n    // Оновлюємо SimpleLightbox, якщо він вже існує\n    lightbox.refresh();\n  }\n}\n\n// Функція для очищення галереї\nexport function clearGallery(container) {\n  container.innerHTML = ''; // Видаляємо весь вміст контейнера\n}\n","import { fetchImages } from './js/pixabay-api.js'; // Імпортуємо функцію для запитів до API\nimport { createGalleryMarkup, renderGallery, clearGallery } from './js/render-functions.js'; // Імпортуємо функції для роботи з DOM\n\n// Знаходимо основні елементи DOM\nconst form = document.querySelector('.search-form'); // Форма для пошуку\nconst gallery = document.querySelector('.gallery'); // Контейнер для галереї\nconst loadMoreBtn = document.querySelector('.load-more'); // Кнопка \"Load More\"\nconst endMessage = document.querySelector('.end-message'); // Повідомлення про кінець результатів\nconst loader = document.querySelector('.loader'); // Лоадер\n\n// Початкові значення змінних\nlet query = ''; // Змінна для збереження пошукового запиту\nlet page = 1; // Початковий номер сторінки\nconst perPage = 15; // Кількість зображень на одну сторінку\n\n// Ховаємо кнопки і повідомлення на старті\nloadMoreBtn.style.display = 'none';\nendMessage.style.display = 'none';\nloader.style.display = 'none'; // Лоадер спочатку прихований\n\n// Функція для показу лоадера\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\n// Функція для приховування лоадера\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\n// Обробник події для відправки форми\nform.addEventListener('submit', async (event) => {\n  event.preventDefault(); // Запобігаємо перезавантаженню сторінки\n\n  query = event.target.elements.searchQuery.value.trim(); // Отримуємо значення поля пошуку\n\n  if (!query) return; // Якщо поле пусте, нічого не робимо\n\n  page = 1; // Скидаємо номер сторінки\n  clearGallery(gallery); // Очищаємо попередні результати\n  loadMoreBtn.style.display = 'none'; // Ховаємо кнопку \"Load More\"\n  endMessage.style.display = 'none'; // Ховаємо повідомлення\n\n  try {\n    showLoader(); // Показуємо лоадер\n    // Виконуємо запит до API\n    const data = await fetchImages(query, page, perPage);\n\n    if (data.hits.length === 0) {\n      // Якщо результатів немає, показуємо сповіщення\n      alert('За вашим запитом нічого не знайдено. Спробуйте ще раз.');\n      return;\n    }\n\n    // Створюємо розмітку і додаємо її до галереї\n    const markup = createGalleryMarkup(data.hits);\n    renderGallery(gallery, markup);\n\n    // Якщо є ще сторінки, показуємо кнопку \"Load More\"\n    if (data.totalHits > perPage) {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    // Обробка помилок\n    console.error(error);\n    alert('Щось пішло не так. Спробуйте пізніше.');\n  } finally {\n    hideLoader(); // Ховаємо лоадер\n  }\n});\n\n// Обробник події для кнопки \"Load More\"\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1; // Збільшуємо номер сторінки\n\n  try {\n    showLoader(); // Показуємо лоадер\n    // Виконуємо запит до API для нових сторінок\n    const data = await fetchImages(query, page, perPage);\n\n    // Створюємо розмітку і додаємо її до галереї\n    const markup = createGalleryMarkup(data.hits);\n    renderGallery(gallery, markup);\n\n    // Перевіряємо, чи досягнуто кінця результатів\n    if (page * perPage >= data.totalHits) {\n      loadMoreBtn.style.display = 'none'; // Ховаємо кнопку \"Load More\"\n      endMessage.style.display = 'block'; // Показуємо повідомлення\n    }\n\n    // Плавне прокручування сторінки вниз\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect(); // Отримуємо висоту першої карточки\n    window.scrollBy({\n      top: cardHeight * 2, // Прокручуємо на дві висоти карточки\n      behavior: 'smooth', // Задаємо плавну анімацію\n    });\n  } catch (error) {\n    // Обробка помилок\n    console.error(error);\n    alert('Щось пішло не так. Спробуйте пізніше.');\n  } finally {\n    hideLoader(); // Ховаємо лоадер\n  }\n});\n"],"names":["BASE_URL","API_KEY","fetchImages","query","page","perPage","params","axios","error","lightbox","createGalleryMarkup","images","webformatURL","largeImageURL","tags","renderGallery","container","markup","SimpleLightbox","clearGallery","form","gallery","loadMoreBtn","endMessage","loader","showLoader","hideLoader","event","data","cardHeight"],"mappings":"6vBAGA,MAAMA,EAAW,2BACXC,EAAU,qCAGT,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAE/D,MAAMC,EAAS,CACb,IAAKL,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACd,EAEE,GAAI,CAGF,OADiB,MAAME,EAAM,IAAIP,EAAU,CAAE,OAAAM,CAAM,CAAE,GACrC,IACjB,OAAQE,EAAO,CAEd,cAAQ,MAAM,iCAAkCA,CAAK,EAC/CA,CACP,CACH,CCzBA,IAAIC,EAGG,SAASC,EAAoBC,EAAQ,CAE1C,OAAOA,EACJ,IACC,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,CAAM,IAAK;AAAA,qCACZD,CAAa;AAAA,yCACTD,CAAY,UAAUE,CAAI;AAAA;AAAA,GAG9D,EACA,KAAK,EAAE,CACZ,CAGO,SAASC,EAAcC,EAAWC,EAAQ,CAC/CD,EAAU,mBAAmB,YAAaC,CAAM,EAC3CR,EAKHA,EAAS,QAAO,EAHhBA,EAAW,IAAIS,EAAe,iBAAkB,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,CAK9F,CAGO,SAASC,EAAaH,EAAW,CACtCA,EAAU,UAAY,EACxB,CC9BA,MAAMI,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,SAAS,EAG/C,IAAIrB,EAAQ,GACRC,EAAO,EACX,MAAMC,EAAU,GAGhBiB,EAAY,MAAM,QAAU,OAC5BC,EAAW,MAAM,QAAU,OAC3BC,EAAO,MAAM,QAAU,OAGvB,SAASC,GAAa,CACpBD,EAAO,MAAM,QAAU,OACzB,CAGA,SAASE,GAAa,CACpBF,EAAO,MAAM,QAAU,MACzB,CAGAJ,EAAK,iBAAiB,SAAU,MAAOO,GAAU,CAK/C,GAJAA,EAAM,eAAc,EAEpBxB,EAAQwB,EAAM,OAAO,SAAS,YAAY,MAAM,OAE5C,EAACxB,EAEL,CAAAC,EAAO,EACPe,EAAaE,CAAO,EACpBC,EAAY,MAAM,QAAU,OAC5BC,EAAW,MAAM,QAAU,OAE3B,GAAI,CACFE,IAEA,MAAMG,EAAO,MAAM1B,EAAYC,EAAOC,EAAMC,CAAO,EAEnD,GAAIuB,EAAK,KAAK,SAAW,EAAG,CAE1B,MAAM,wDAAwD,EAC9D,MACD,CAGD,MAAMX,EAASP,EAAoBkB,EAAK,IAAI,EAC5Cb,EAAcM,EAASJ,CAAM,EAGzBW,EAAK,UAAYvB,IACnBiB,EAAY,MAAM,QAAU,QAE/B,OAAQd,EAAO,CAEd,QAAQ,MAAMA,CAAK,EACnB,MAAM,uCAAuC,CACjD,QAAY,CACRkB,GACD,EACH,CAAC,EAGDJ,EAAY,iBAAiB,QAAS,SAAY,CAChDlB,GAAQ,EAER,GAAI,CACFqB,IAEA,MAAMG,EAAO,MAAM1B,EAAYC,EAAOC,EAAMC,CAAO,EAG7CY,EAASP,EAAoBkB,EAAK,IAAI,EAC5Cb,EAAcM,EAASJ,CAAM,EAGzBb,EAAOC,GAAWuB,EAAK,YACzBN,EAAY,MAAM,QAAU,OAC5BC,EAAW,MAAM,QAAU,SAI7B,KAAM,CAAE,OAAQM,CAAU,EAAKR,EAAQ,kBAAkB,wBACzD,OAAO,SAAS,CACd,IAAKQ,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,OAAQrB,EAAO,CAEd,QAAQ,MAAMA,CAAK,EACnB,MAAM,uCAAuC,CACjD,QAAY,CACRkB,GACD,CACH,CAAC"}